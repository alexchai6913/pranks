<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üßß You received a Prosperous Gift!</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #2b0a0a;
            overflow: hidden;
            perspective: 1000px;
        }

        .font-serif { font-family: 'Cinzel', serif; }

        .envelope-container {
            position: relative;
            width: 320px;
            height: 480px;
            margin: 0 auto;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .envelope-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #D00000 0%, #990000 100%);
            border-radius: 8px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .envelope-pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #E60000 0%, #B30000 100%);
            z-index: 20;
            border-radius: 8px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #FF1A1A 0%, #CC0000 100%);
            clip-path: polygon(0 0, 100% 0, 50% 100%); 
            transform-origin: top;
            z-index: 30;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .gold-seal {
            position: absolute;
            top: 130px;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #FCD34D, #B45309);
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            z-index: 40;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #FEF3C7;
        }

        .seal-text {
            color: #78350F;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 28px;
        }

        .card-content {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 300px; 
            height: 460px;
            background: #000;
            z-index: 15;
            border-radius: 6px;
            overflow: hidden;
        }
        
        /* Ensure video covers the entire card */
        #rick-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gold-dust {
            position: absolute;
            background: #FCD34D;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="h-screen w-full flex flex-col items-center justify-center relative">

    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/red-paper.png')] opacity-20 pointer-events-none"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-red-950 via-red-900 to-black opacity-90 -z-10"></div>

    <!-- UI Header -->
    <div id="header-ui" class="absolute top-10 text-center z-50 space-y-2 pointer-events-none">
        <div class="inline-flex items-center gap-2 px-4 py-1 rounded-full bg-white/10 backdrop-blur border border-white/20 text-yellow-200 text-xs tracking-widest uppercase">
            <i data-lucide="sparkles" class="w-3 h-3"></i>
            <span>Lunar New Year Gift</span>
        </div>
        <h1 class="font-serif text-3xl md:text-4xl text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-yellow-200 font-bold drop-shadow-sm">
            RM 8,888.00
        </h1>
        <p class="text-white/60 text-sm font-light">Sent by "Bossku"</p>
    </div>

    <!-- THE RED PACKET -->
    <div class="envelope-container" id="angpau">
        
        <!-- The Card Inside -->
        <div class="card-content" id="card-inner">
            <!-- Fixed Video Tag: Added playsinline and object-fit class -->
            <video id="rick-video" preload="auto" loop playsinline webkit-playsinline>
                <source src="https://cdn.mtdv.me/video/rick.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div class="envelope-body"></div>
        <div class="envelope-pocket"></div>
        
        <div class="envelope-flap" id="flap"></div>

        <button class="gold-seal group transition-transform duration-300" id="open-btn">
            <span class="seal-text group-hover:animate-pulse">Á¶è</span>
            <div class="absolute inset-0 rounded-full bg-white/30 blur-md opacity-0 group-hover:opacity-50 transition-opacity"></div>
        </button>
    </div>

    <div id="footer-ui" class="absolute bottom-10 text-white/30 text-xs tracking-widest uppercase animate-pulse">
        Tap the seal to open
    </div>

    <script>
        lucide.createIcons();
        const container = document.getElementById('angpau');
        const flap = document.getElementById('flap');
        const btn = document.getElementById('open-btn');
        const cardInner = document.getElementById('card-inner');
        const video = document.getElementById('rick-video');
        const header = document.getElementById('header-ui');
        const footer = document.getElementById('footer-ui');

        function createDust() {
            for(let i=0; i<30; i++) {
                const dot = document.createElement('div');
                dot.className = 'gold-dust';
                document.body.appendChild(dot);
                const size = Math.random() * 4 + 1;
                gsap.set(dot, {
                    width: size, height: size,
                    x: Math.random() * window.innerWidth,
                    y: Math.random() * window.innerHeight,
                    opacity: Math.random() * 0.5 + 0.2
                });
                gsap.to(dot, {
                    y: "-=100", opacity: 0,
                    duration: Math.random() * 3 + 2,
                    repeat: -1, ease: "none"
                });
            }
        }
        createDust();

        gsap.to(container, {
            y: -10, rotation: 1, duration: 3,
            repeat: -1, yoyo: true, ease: "sine.inOut"
        });
        
        btn.addEventListener('click', () => {
            const tl = gsap.timeline();

            // Unlock audio context early for mobile
            video.play().then(() => {
                video.pause(); // Just a "handshake" to allow sound later
            }).catch(e => console.log("Audio unlock failed", e));

            tl.to(btn, { scale: 2, opacity: 0, duration: 0.3, ease: "power2.in" })
            .to([header, footer], { opacity: 0, duration: 0.2 }, "<")
            .to(flap, { rotateX: 180, duration: 0.6, ease: "power2.inOut" })
            .to(cardInner, {
                y: -300, scale: 0.9, duration: 0.8,
                ease: "power3.inOut", zIndex: 60
            })
            .to(cardInner, {
                position: 'fixed', top: 0, left: 0,
                width: '100%', height: '100%',
                y: 0, scale: 1, borderRadius: 0,
                duration: 0.5, ease: "expo.out",
                onComplete: () => {
                    // Corrected: Standard HTML5 video play method
                    video.muted = false;
                    video.play();
                }
            })
            .to(".envelope-body, .envelope-pocket, .envelope-flap", {
                opacity: 0, duration: 0.5
            }, "-=0.5");
        });
    </script>
</body>
</html>
